---
title: "Example analysis — Palmer Penguins"
bibliography: references.bib
---

::: {.callout-note}
### Question & audience
**Question.** How do body mass and bill dimensions vary by species and island?  
**Audience.** Peers learning basic EDA and tidyverse workflows.
:::

::: {.column-margin}
**Data dictionary**  
<https://allisonhorst.github.io/palmerpenguins/reference/penguins.html>
:::

## Data and sources

Used the **palmerpenguins** dataset [@horst2020palmerpenguins].  
Tidy tools: **dplyr** [@dplyr], **tidyr** [@tidyr], **ggplot2** [@ggplot2].  
Site is built with **Quarto** [@quarto].

```{r}
#| message: false
library(tidyverse)
library(palmerpenguins)
library(janitor)

peng <- penguins |> clean_names()
peng |> dplyr::glimpse()
```

To include an **external image** (not created by me), save dataset art locally:

```{r}
#| echo: false
if (!dir.exists("images")) dir.create("images")
img <- "images/penguins-art.png"
if (!file.exists(img)) {
  download.file(
    "https://raw.githubusercontent.com/allisonhorst/palmerpenguins/master/man/figures/lter_penguins.png",
    destfile = img, mode = "wb"
  )
}
```

![](images/penguins-art.png){fig-alt="Palmer Station penguin art" width="420"}

## Minimal wrangling (≥5 functions across dplyr/tidyr)

```{r}
peng2 <-
  peng |>
  tidyr::drop_na(species, island, body_mass_g, bill_length_mm, bill_depth_mm, flipper_length_mm) |>
  dplyr::filter(body_mass_g > 2500) |>
  dplyr::mutate(bmi = body_mass_g / (flipper_length_mm^2)) |>
  dplyr::select(species, island, sex, body_mass_g, bill_length_mm, bill_depth_mm, bmi) |>
  dplyr::arrange(species, island)
```

Reshape to long form for a faceted plot:

```{r}
peng_long <-
  peng2 |>
  tidyr::pivot_longer(
    cols = c(bill_length_mm, bill_depth_mm),
    names_to = "bill_metric", values_to = "mm"
  )
```

## Three+ plots (3 different geoms; one uses faceting)

### 1) Scatter + smooth
```{r}
ggplot(peng2, aes(bill_length_mm, bill_depth_mm, color = species)) +
  geom_point(alpha = 0.7) +
  geom_smooth(se = FALSE) +
  labs(
    title = "Bill length vs depth by species",
    subtitle = "Palmer Station LTER penguins",
    x = "Bill length (mm)", y = "Bill depth (mm)",
    caption = "Source: palmerpenguins"
  )
```

### 2) Boxplot
```{r}
ggplot(peng2, aes(species, body_mass_g, fill = species)) +
  geom_boxplot() +
  labs(
    title = "Body mass varies by species",
    x = "Species", y = "Body mass (g)",
    caption = "Boxes: IQR; Line: median; Whiskers: 1.5×IQR"
  ) +
  theme(legend.position = "none")
```

### 3) Faceted bars (geom_col + facet_wrap)
```{r}
peng_summary <-
  peng_long |>
  dplyr::group_by(species, island, bill_metric) |>
  dplyr::summarise(mean_mm = mean(mm), .groups = "drop")

ggplot(peng_summary, aes(island, mean_mm, fill = bill_metric)) +
  geom_col(position = "dodge") +
  facet_wrap(~ species) +
  labs(
    title = "Mean bill dimensions by species and island",
    x = "Island", y = "Mean (mm)",
    fill = "Measure",
    caption = "Faceted by species"
  )
```

## Results summary (4–6 sentences)

Overall, **Gentoo** penguins exhibit the highest median body mass, while **Adélie** are generally lighter.  
Bill length and depth show species-specific clusters, with clear separation particularly for Gentoo vs. Adélie.  
Mean bill dimensions vary across islands, with Biscoe often showing larger averages for Gentoo.  
These patterns are consistent with ecological and morphological differences documented in the literature.

::: {.callout-tip}
**Reproducibility note.** All code is runnable end-to-end with dependencies listed in the repo.
:::

## Functions used (Checklist)

- **dplyr/tidyr:** `drop_na()`, `filter()`, `mutate()`, `select()`, `arrange()`, `pivot_longer()`, `group_by()`, `summarise()`  
- **ggplot2 geoms/facets:** `geom_point()`, `geom_smooth()`, `geom_boxplot()`, `geom_col()`, `facet_wrap()`
